#!/usr/bin/env node

var program = require('commander');
var inquirer = require('inquirer');
var request = require('request');

API_URL = 'http://en.wikipedia.org/w/api.php';

program
    .version('0.0.1')
    .usage('[options]')
    .description('Wikipedia articles on command line')
    .option('--log-filename <file>', 'Path to log queries')
    .parse(process.argv);

program.logFilename = program.logFilename || 'wikipedia_cli_node.log';

inquirer.prompt([{
    type: 'input',
    name: 'query',
    message: 'Search'
}]).then(function (answers) {
    var query = answers.query;
});

function _wiki_request(params, callback) {
    params['format'] = 'json';
    if (!params.hasOwnProperty('action')) {
        params['action'] = 'query';
    }

    request({url: API_URL, qs: params}, callback);
}
